import{_ as b}from"./LoadingAndError.71246b88.js";import{_ as S}from"./PageBaseLayout.c72097e2.js";import{_ as B,g as w,u as N,r as s,h as I,i as R,o as k,k as F,a,w as t,b as K,V as O,f as g,e as x,d as c}from"./entry.26e0f55e.js";import{u as A}from"./useMyFetch.c7da1f4b.js";import{V as v}from"./VTextField.dc9b27e5.js";import{V as E}from"./VApp.dbfd8bb3.js";const T={props:{mode:{type:String,required:!0}},setup(i){const r=w(),d=N(),e=s(r.fullPath.substring(0,r.fullPath.indexOf("/info"))),h=s(null),f=s(!1),m=s(!1),l=s({name:"",phoneNumber:"",howToKnow:""}),n=s({text:[o=>/[\u0600-\u06FF\uFB8A\u067E\u0686\u06AF]$/.test(o)?!0:"(از کیبورد فارسی استفاده کنید)فیلد اجباری را پر کنید"],num:[o=>(o==null?void 0:o.length)===11&&/[0-9-]+/.test(o)&&/^09\d{9}$/.test(o)||/[۰-۹-]+/.test(o)&&/^۰۹[۰-۹]{9}$/.test(o)?!0:"شماره تلفن را به درستی وارد کنید"]}),u=I(()=>{if(i.mode==="Kid")return"nurseReserveChild-info";if(i.mode==="OldAge")return"nurseReserveElder-info";if(i.mode==="Patient")return"nurseReserveSick-info"}),_=s(u.value.substring(0,u.value.indexOf("-info"))),V=async o=>{if(o)try{const p=await A("/Nurse/reserve",m,f,"post","",l.value);console.log(p),localStorage.removeItem(u.value),localStorage.removeItem(_.value),d.push(`${e.value}/support`)}catch(p){p.value=!0,console.error("Error fetching data:",p)}},y=()=>{localStorage.setItem(u.value,JSON.stringify(l.value)),d.push(e.value)};return R(()=>{if(localStorage.getItem(u.value)&&(l.value={...l.value,...JSON.parse(localStorage.getItem(u.value))}),localStorage.getItem(_.value)){const o=JSON.parse(localStorage.getItem(_.value));l.value={...l.value,...o}}else d.push(e.value)}),{form:h,rules:n,submit:V,routBackHandler:y,info:l,error:f,loading:m}}},q=c("p",{class:"text-teal-accent-4"},null,-1),C=c("span",{class:"text-error"},"*",-1),H=c("p",{class:"text-teal-accent-4"},null,-1),P=c("span",{class:"text-error"},"*",-1),J=c("p",{class:"text-teal-accent-4"},null,-1);function L(i,r,d,e,h,f){const m=b,l=S;return k(),F("div",null,[a(E,null,{default:t(()=>[a(l,{title:"اطلاعات شخصی",formClass:"personal-info",bottomBtn:!0,onBaseRouteBackHandler:e.routBackHandler,onBaseSubmit:e.submit},{default:t(()=>[a(m,{loading:e.loading,error:e.error,class:"mb-3",postData:!0},null,8,["loading","error"]),a(K,{"no-gutters":"",class:"px-3"},{default:t(()=>[a(O,{xxl:"5",xl:"6",lg:"7",md:"8",cols:"12",class:"mx-auto"},{default:t(()=>[a(v,{variant:"underlined",label:"نام و نام خانوادگی",modelValue:e.info.name,"onUpdate:modelValue":r[0]||(r[0]=n=>e.info.name=n),color:"teal-accent-4",class:"align py-2 px-3",rules:e.rules.text,required:""},{error:t(()=>[q]),append:t(()=>[C,a(g,{color:"teal-accent-4",class:"ml-2",style:{opacity:"1"}},{default:t(()=>[x("mdi-account ")]),_:1})]),_:1},8,["modelValue","rules"]),a(v,{variant:"underlined",label:"شماره همراه",modelValue:e.info.phoneNumber,"onUpdate:modelValue":r[1]||(r[1]=n=>e.info.phoneNumber=n),color:"teal-accent-4",class:"align py-2 px-3",rules:e.rules.num,required:""},{error:t(()=>[H]),append:t(()=>[P,a(g,{color:"teal-accent-4",class:"ml-2",style:{opacity:"1"}},{default:t(()=>[x("mdi-phone ")]),_:1})]),_:1},8,["modelValue","rules"]),a(v,{variant:"underlined",label:"نحوه آشنایی با ما",modelValue:e.info.howToKnow,"onUpdate:modelValue":r[2]||(r[2]=n=>e.info.howToKnow=n),color:"teal-accent-4",class:"align py-2 px-3",required:""},{error:t(()=>[J]),append:t(()=>[a(g,{color:"teal-accent-4",class:"ml-2",style:{opacity:"1"}},{default:t(()=>[x("mdi-human-greeting-proximity")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onBaseRouteBackHandler","onBaseSubmit"])]),_:1})])}const Q=B(T,[["render",L]]);export{Q as _};
