import{u as p}from"./useToEnglishDigits.dc917fe9.js";import{u as n}from"./useMyFetch.c7da1f4b.js";import{q as l,r as d,h as m}from"./entry.26e0f55e.js";const w=l("supportMsg",()=>{const o=d([]),c=m(()=>o.value),u=s=>{const e=new Date(s),t=new Date(e.getTime()+3.5*60*60*1e3),a=t.getHours(),r=String(t.getMinutes()).padStart(2,"0");return`${String(a).padStart(2,"0")}:${String(r).padStart(2,"0")}`},g=s=>{const e=s.toLocaleDateString("fa-IR");return p(e)},i=(s,e)=>{const t=new FileReader;t.onload=()=>{e.image=t.result},t.readAsDataURL(s)};return{allMessages:o,getSupportMessages:async(s,e)=>{try{const t=await n("/Message",s,e,"getWithToken");o.value=t,o.value.forEach(async a=>{if(a.time=u(a.CreatedAt),a.date=g(new Date(a.CreatedAt)),a.MessageType==="image")try{const r=await n(`/uploads/${a.Content}`,s,e,"get");i(r,a)}catch(r){console.log(r),e.value=!0}})}catch(t){console.error("Error fetching data:",t);return}},getAllMessages:c}});export{w as u};
